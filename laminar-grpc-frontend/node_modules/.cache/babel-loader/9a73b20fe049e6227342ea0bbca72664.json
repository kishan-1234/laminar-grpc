{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { isFunction } from 'util';\nimport { filterData, searchData } from './FilterUtils';\nimport { getGroupedData } from './GroupUtils';\nimport { getPageData, getPagesCount } from './PagingUtils';\nimport { sortData } from './SortUtils';\nimport { convertToColumnTypes } from './TypeUtils';\nexport var extendProps = function (childElementAttributes, childProps, childComponent) {\n  var resultProps = childElementAttributes;\n  var childCustomAttributes = childComponent && childComponent.elementAttributes && childComponent.elementAttributes(childProps);\n\n  if (childCustomAttributes) {\n    var dispatch = childProps.dispatch;\n    resultProps = mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch);\n  }\n\n  return resultProps;\n};\n\nvar emptyFunc = function () {};\n\nexport var mergeProps = function (childElementAttributes, childProps, childCustomAttributes, dispatch) {\n  var customPropsWithEvents = {};\n\n  var _loop_1 = function (prop) {\n    if (childCustomAttributes.hasOwnProperty(prop)) {\n      var propName = prop;\n      var propValue_1 = childCustomAttributes[propName];\n      var baseFunc_1 = childElementAttributes[propName] || emptyFunc;\n\n      if (isFunction(propValue_1)) {\n        customPropsWithEvents[prop] = function (e) {\n          propValue_1(e, {\n            baseFunc: baseFunc_1,\n            childElementAttributes: childElementAttributes,\n            childProps: childProps,\n            dispatch: dispatch\n          });\n        };\n      }\n    }\n  };\n\n  for (var prop in childCustomAttributes) {\n    _loop_1(prop);\n  }\n\n  var mergedResult = __assign(__assign(__assign(__assign({}, childElementAttributes), childCustomAttributes), customPropsWithEvents), {\n    className: (childElementAttributes.className || '') + \" \" + (childCustomAttributes.className || ''),\n    style: __assign(__assign({}, childCustomAttributes.style), childElementAttributes.style)\n  });\n\n  return mergedResult;\n};\n\nvar _filterData = function (props) {\n  var extendedFilter = props.extendedFilter,\n      columns = props.columns,\n      searchText = props.searchText,\n      search = props.search;\n  var _a = props.data,\n      data = _a === void 0 ? [] : _a;\n  data = __spreadArrays(data);\n  data = extendedFilter ? extendedFilter(data) : data;\n  data = searchText ? searchData(columns, data, searchText, search) : data;\n  data = convertToColumnTypes(data, columns);\n  data = filterData(data, columns);\n  return data;\n};\n\nexport var getData = function (props) {\n  var columns = props.columns,\n      groups = props.groups,\n      groupsExpanded = props.groupsExpanded,\n      paging = props.paging;\n  var _a = props.data,\n      data = _a === void 0 ? [] : _a;\n  data = __spreadArrays(data);\n  data = _filterData(props);\n  data = sortData(columns, data);\n  var groupedColumns = groups ? columns.filter(function (c) {\n    return groups.some(function (g) {\n      return g.columnKey === c.key;\n    });\n  }) : [];\n  var groupedData = groups ? getGroupedData(data, groups, groupedColumns, groupsExpanded) : data;\n  data = getPageData(groupedData, paging);\n  return data;\n};\nexport var prepareTableOptions = function (props) {\n  var groups = props.groups,\n      paging = props.paging;\n  var columns = props.columns;\n  var groupedData = getData(props);\n  var groupColumnsCount = 0;\n  var groupedColumns = [];\n\n  if (groups) {\n    groupColumnsCount = groups.length;\n    groupedColumns = columns.filter(function (c) {\n      return groups.some(function (g) {\n        return g.columnKey === c.key;\n      });\n    });\n    columns = columns.filter(function (c) {\n      return !groups.some(function (g) {\n        return g.columnKey === c.key;\n      });\n    });\n  }\n\n  var pagesCount = 1;\n\n  if (paging && paging.enabled) {\n    pagesCount = getPagesCount(_filterData(props), paging);\n  }\n\n  return {\n    columns: columns,\n    groupColumnsCount: groupColumnsCount,\n    groupedColumns: groupedColumns,\n    groupedData: groupedData,\n    pagesCount: pagesCount\n  };\n};\nexport var getDraggableProps = function (key, dispatch, actionCreator, draggedClass, dragOverClass) {\n  var count = 0;\n  return {\n    draggable: true,\n    onDragStart: function (event) {\n      count = 0;\n      event.dataTransfer.setData('ka-draggableKeyValue', JSON.stringify(key));\n      event.currentTarget.classList.add(draggedClass);\n      event.dataTransfer.effectAllowed = 'move';\n    },\n    onDragEnd: function (event) {\n      event.currentTarget.classList.remove(draggedClass);\n    },\n    onDrop: function (event) {\n      event.currentTarget.classList.remove(dragOverClass);\n      var draggableKeyValue = JSON.parse(event.dataTransfer.getData('ka-draggableKeyValue'));\n      dispatch(actionCreator(draggableKeyValue, key));\n    },\n    onDragEnter: function (event) {\n      count++;\n\n      if (!event.currentTarget.classList.contains(dragOverClass)) {\n        event.currentTarget.classList.add(dragOverClass);\n      }\n\n      event.preventDefault();\n    },\n    onDragLeave: function (event) {\n      count--;\n\n      if (count === 0) {\n        event.currentTarget.classList.remove(dragOverClass);\n      }\n    },\n    onDragOver: function (event) {\n      if (!event.currentTarget.classList.contains(dragOverClass)) {\n        event.currentTarget.classList.add(dragOverClass);\n      }\n\n      event.preventDefault();\n    }\n  };\n};","map":{"version":3,"sources":["/Users/gayatri/work/laminar-grpc/frontend/node_modules/ka-table/Utils/PropsUtils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArrays","il","r","Array","k","a","j","jl","isFunction","filterData","searchData","getGroupedData","getPageData","getPagesCount","sortData","convertToColumnTypes","extendProps","childElementAttributes","childProps","childComponent","resultProps","childCustomAttributes","elementAttributes","dispatch","mergeProps","emptyFunc","customPropsWithEvents","_loop_1","prop","propName","propValue_1","baseFunc_1","e","baseFunc","mergedResult","className","style","_filterData","props","extendedFilter","columns","searchText","search","_a","data","getData","groups","groupsExpanded","paging","groupedColumns","filter","c","some","g","columnKey","key","groupedData","prepareTableOptions","groupColumnsCount","pagesCount","enabled","getDraggableProps","actionCreator","draggedClass","dragOverClass","count","draggable","onDragStart","event","dataTransfer","setData","JSON","stringify","currentTarget","classList","add","effectAllowed","onDragEnd","remove","onDrop","draggableKeyValue","parse","onDragEnter","contains","preventDefault","onDragLeave","onDragOver"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { isFunction } from 'util';\nimport { filterData, searchData } from './FilterUtils';\nimport { getGroupedData } from './GroupUtils';\nimport { getPageData, getPagesCount } from './PagingUtils';\nimport { sortData } from './SortUtils';\nimport { convertToColumnTypes } from './TypeUtils';\nexport var extendProps = function (childElementAttributes, childProps, childComponent) {\n    var resultProps = childElementAttributes;\n    var childCustomAttributes = childComponent && childComponent.elementAttributes && childComponent.elementAttributes(childProps);\n    if (childCustomAttributes) {\n        var dispatch = childProps.dispatch;\n        resultProps = mergeProps(childElementAttributes, childProps, childCustomAttributes, dispatch);\n    }\n    return resultProps;\n};\nvar emptyFunc = function () { };\nexport var mergeProps = function (childElementAttributes, childProps, childCustomAttributes, dispatch) {\n    var customPropsWithEvents = {};\n    var _loop_1 = function (prop) {\n        if (childCustomAttributes.hasOwnProperty(prop)) {\n            var propName = prop;\n            var propValue_1 = childCustomAttributes[propName];\n            var baseFunc_1 = childElementAttributes[propName] || emptyFunc;\n            if (isFunction(propValue_1)) {\n                customPropsWithEvents[prop] = function (e) {\n                    propValue_1(e, {\n                        baseFunc: baseFunc_1,\n                        childElementAttributes: childElementAttributes,\n                        childProps: childProps,\n                        dispatch: dispatch,\n                    });\n                };\n            }\n        }\n    };\n    for (var prop in childCustomAttributes) {\n        _loop_1(prop);\n    }\n    var mergedResult = __assign(__assign(__assign(__assign({}, childElementAttributes), childCustomAttributes), customPropsWithEvents), { className: (childElementAttributes.className || '') + \" \" + (childCustomAttributes.className || ''), style: __assign(__assign({}, childCustomAttributes.style), childElementAttributes.style) });\n    return mergedResult;\n};\nvar _filterData = function (props) {\n    var extendedFilter = props.extendedFilter, columns = props.columns, searchText = props.searchText, search = props.search;\n    var _a = props.data, data = _a === void 0 ? [] : _a;\n    data = __spreadArrays(data);\n    data = extendedFilter ? extendedFilter(data) : data;\n    data = searchText ? searchData(columns, data, searchText, search) : data;\n    data = convertToColumnTypes(data, columns);\n    data = filterData(data, columns);\n    return data;\n};\nexport var getData = function (props) {\n    var columns = props.columns, groups = props.groups, groupsExpanded = props.groupsExpanded, paging = props.paging;\n    var _a = props.data, data = _a === void 0 ? [] : _a;\n    data = __spreadArrays(data);\n    data = _filterData(props);\n    data = sortData(columns, data);\n    var groupedColumns = groups ? columns.filter(function (c) { return groups.some(function (g) { return g.columnKey === c.key; }); }) : [];\n    var groupedData = groups ? getGroupedData(data, groups, groupedColumns, groupsExpanded) : data;\n    data = getPageData(groupedData, paging);\n    return data;\n};\nexport var prepareTableOptions = function (props) {\n    var groups = props.groups, paging = props.paging;\n    var columns = props.columns;\n    var groupedData = getData(props);\n    var groupColumnsCount = 0;\n    var groupedColumns = [];\n    if (groups) {\n        groupColumnsCount = groups.length;\n        groupedColumns = columns.filter(function (c) { return groups.some(function (g) { return g.columnKey === c.key; }); });\n        columns = columns.filter(function (c) { return !groups.some(function (g) { return g.columnKey === c.key; }); });\n    }\n    var pagesCount = 1;\n    if (paging && paging.enabled) {\n        pagesCount = getPagesCount(_filterData(props), paging);\n    }\n    return {\n        columns: columns,\n        groupColumnsCount: groupColumnsCount,\n        groupedColumns: groupedColumns,\n        groupedData: groupedData,\n        pagesCount: pagesCount\n    };\n};\nexport var getDraggableProps = function (key, dispatch, actionCreator, draggedClass, dragOverClass) {\n    var count = 0;\n    return {\n        draggable: true,\n        onDragStart: function (event) {\n            count = 0;\n            event.dataTransfer.setData('ka-draggableKeyValue', JSON.stringify(key));\n            event.currentTarget.classList.add(draggedClass);\n            event.dataTransfer.effectAllowed = 'move';\n        },\n        onDragEnd: function (event) {\n            event.currentTarget.classList.remove(draggedClass);\n        },\n        onDrop: function (event) {\n            event.currentTarget.classList.remove(dragOverClass);\n            var draggableKeyValue = JSON.parse(event.dataTransfer.getData('ka-draggableKeyValue'));\n            dispatch(actionCreator(draggableKeyValue, key));\n        },\n        onDragEnter: function (event) {\n            count++;\n            if (!event.currentTarget.classList.contains(dragOverClass)) {\n                event.currentTarget.classList.add(dragOverClass);\n            }\n            event.preventDefault();\n        },\n        onDragLeave: function (event) {\n            count--;\n            if (count === 0) {\n                event.currentTarget.classList.remove(dragOverClass);\n            }\n        },\n        onDragOver: function (event) {\n            if (!event.currentTarget.classList.contains(dragOverClass)) {\n                event.currentTarget.classList.add(dragOverClass);\n            }\n            event.preventDefault();\n        }\n    };\n};"]},"metadata":{},"sourceType":"module"}